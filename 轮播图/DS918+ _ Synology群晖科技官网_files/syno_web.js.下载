var SYNO_WEB=SYNO_WEB||{baseHref:$("base").prop("href"),baseURI:$("base").prop("href").replace(window.location.protocol+"//"+window.location.host,""),langCode:$("html").data("lang-code"),_token:$('input[name="_token"]').val(),mainBody:$("#main"),lastUrl:location.href};!function(){function e(){$("a[href]").each(t)}function t(){var e=$(this);if(1!=e.data("rewrited")){e.data("rewrited",!0);var t=e.attr("href");void 0===t||/^http(s)?/.test(t)||/^#/.test(t)||/^javascript/.test(t)||/^mailto:/.test(t)||/^img(.*?)(jpg|png|gif|pdf)/.test(t)||r.test(t)?/^#(.+)/.test(t)&&e.attr("href",location.href.split("#").shift()+t):d.test(t)?/^\//.test(t)?e.attr("href",SYNO_WEB.baseURI+t.substr(1)):e.attr("href",SYNO_WEB.baseURI+t):/^\//.test(t)?e.attr("href",SYNO_WEB.baseURI+SYNO_WEB.langCode+t):e.attr("href",SYNO_WEB.baseURI+SYNO_WEB.langCode+"/"+t)}}function o(e,t){var o=$.extend({speed:300,delay:0,offset:10,includeHeader:!1},t),a=0;if("top"==e)a=0;else if("number"==typeof e)a=e;else if(e instanceof jQuery&&1==e.length)a=e.offset().top;else{if(1!=$(e).length)return console.log("SYNO_WEB.scrollTo: element not found"),!1;a=$(e).offset().top}$("#menu_link").is(":visible")?a=a-$("#main_menu").height()-20:o.includeHeader?a-=$("#main_menu").height():a-=20,a=Math.max(a-o.offset,0),setTimeout(function(){console.log("scrollto",a,e),$("html, body").stop().animate({scrollTop:a},o.speed)},o.delay)}function a(){location.hash&&!/knowledgebase/.test(location.href)&&setTimeout(function(){var e=decodeURIComponent(location.hash.slice(1)),t=$("#"+e+', [name="'+e+'"]');t.length&&o(t.first())},250)}function n(){SYNO_HELPER.on("resize",{key:"SYNO_WEB",element:"body",trigger:!0},function(){var e=window.innerWidth,t="min mobile";e>=480&&(t="xs mobile"),e>=568&&(t="sm mobile"),e>=768&&(t="md mobile"),e>=1024&&(t="lg desktop"),e>=1280&&(t="xl desktop"),e>=1440&&(t="xxl desktop"),$("body").removeClass("xs sm md lg xl xxl desktop mobile").addClass(t)})}function i(){$(".dotdotdot").each(function(){var e={wrap:/^(zh|ja|kr)/.test(SYNO_WEB.langCode)?"letter":"word"};$(this).find(".more")&&(e.after=".more"),$(this).dotdotdot(e)})}function l(){console.log("pageLoaded",location.href),e(),a(),$(".vue").addClass("ready"),SYNO_WEB.initFlexslider(),SYNO_WEB.triggerDotdotdot(),SYNO_WEB.initAffixBanner(),SYNO_WEB.initFeatureItemMenu()}function s(e){var t=SYNO_WEB.langCode,o=$(this).data("youtube-id");if("zh-cn"!=t&&o){e.preventDefault();var a="zh-tw"==t||"zh-hk"==t?"zh-Hant":t.substr(0,2);$.magnificPopup.open({showCloseBtn:!0,enableEscapeKey:!1,items:{src:'<div class="dialog video_dialog"><iframe width="100%" height="100%" src="https://www.youtube.com/embed/'+o+"?autoplay=1&cc_lang_pref="+a+'&cc_load_policy=1" frameborder="0" gesture="media" allowfullscreen=""></iframe></div>',type:"inline"},mainClass:"mfp-fade",closeMarkup:'<button title="%title%" type="button" class="mfp-close mfp-video-close">&#215;</button>'})}else $(this).is(".open_popup")&&window.open($(this).prop("href"))}var r=new RegExp("^"+SYNO_WEB.baseURI+SYNO_WEB.langCode+"/"),d=new RegExp("^/?"+SYNO_WEB.langCode+"/");$(document).ready(function(){SYNO_WEB.scrollTo=o,SYNO_WEB.triggerDotdotdot=i,SYNO_WEB.mainBody.on("pageLoaded",l).trigger("pageLoaded").on("mouseenter click","a",t).on("click",".youtube_popup",s),n(),$("body").on("click",".change_language",function(){var e=$($("#lang_dialog").html());e.find("a").each(function(){var e=$(this).data("lang"),t=window.location.href.replace(SYNO_WEB.langCode,e);$(this).attr("href",t),$(this).on("click",function(e){e.preventDefault(),e.stopPropagation(),location.href=$(this).attr("href")})}),SYNO_WEB.alert(e,null,"syno_language_dialog")})})}();