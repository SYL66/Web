!function(){function t(t,e){return console.log("isDoRouterPage",t,e),!d.some(function(o){var n=new RegExp(o,"i");return n.test(e)&&n.test(t)})}function e(t){var e=$(this),n=e.attr("href"),a=e.attr("target");!(!n||/^http(s)?:\/\//.test(n)||/^javascript:/.test(n)||/^mailto:/.test(n)||/^#/.test(n)||/^img(.*?)(jpg|png|gif)/.test(n)||"string"==typeof a&&("_blank"==a||"_new"==a)||e.is("[data-toggle], [data-gallery]"))?(t.preventDefault(),o(n)):/^#/.test(n)&&t.preventDefault()}function o(e){if(history.pushState){var o=t(e,location.href);window.history.pushState({page:e},"",e),r(o),SYNO_WEB.lastUrl=e}else window.location.href=e}function n(t){console.log("replaceUrl",t);var e=!0,o=new RegExp("^"+window.location.origin);/^http(s)?:\/\//.test(t)&&!o.test(t)&&(e=!1),history.replaceState&&e?history.replaceState({page:t},"",t):location.href!=t&&(location.href=t)}function a(t){t.length&&n(location.href.split("#")[0]+"#"+t)}function i(e){console.log("popUrlHandler",e);var o=t(location.href,SYNO_WEB.lastUrl);o?(r(o),SYNO_WEB.lastUrl=location.href):SYNO_WEB.mainBody.trigger("pageLoaded")}function r(t){1==t?l():SYNO_WEB.mainBody.trigger("pageLoaded")}function l(){SYNO_WEB.mainBody.css({opacity:0}),SYNO_WEB.scrollTo(0,{speed:0}),f&&f.abort();var t=location.pathname;location.search?t=t+location.search+"&ajax=1":t+="?ajax=1",f=$.ajax({url:t,type:"get",dataType:"html"}).done(function(t,e,o){s(t,function(){SYNO_WEB.mainBody.css({opacity:1}).trigger("pageLoaded")})}).fail(function(t,e,o){console.log("Ajax error: "+t.status),location.reload()})}function s(t,e){var o=$("head"),a=$("<div>").html(t);if(0<a.find("synoredirect").length){console.log(a.find("synoredirect").text());var i=a.find("synoredirect").text();return n(i),window.location.href=i,!1}if(0<a.find("synometa").length){var r=$('meta[name="keywords"]');SYNO_WEB.mainBody.removeClass().addClass(a.find("synometa").attr("section")),$("title").text(a.find("synometa").attr("title")),$('meta[name="description"]').attr("content",a.find("synometa").attr("descr")),r.length&&r.attr("content",a.find("synometa").attr("keywords"))}a.find("link").each(function(){var t=$(this).attr("href");0==o.find('link[href="'+t+'"]').length&&$("<link>").appendTo(o).attr({rel:"stylesheet",href:t})}),a.find("synometa").remove(),a.find("link").remove(),$("body > #tiptip_holder, body > .select2-container--open, body > .autocomplete-suggestions").remove(),SYNO_WEB.mainBody.html(a.html()),e&&e()}function c(t,e){var o=window.location.pathname.replace(/\?$/,"");(e=e||location.hash).length&&"#"!=e[0]&&(e="#"+e),"string"==typeof t?o=[o,t].join("?"):"object"==typeof t&&(o=[o,$.param(t)].join("?")),n(o+=e)}var d=["knowledgebase/(DSM|DSMUC|Surveillance|SRM|Mobile)/(help|tutorial|video)"],f=null;window.history.replaceState({page:window.location.href},"",window.location.href),SYNO_WEB.router=l,SYNO_WEB.pushUrl=o,SYNO_WEB.replaceUrl=n,SYNO_WEB.replaceHash=a,SYNO_WEB.updateQueryString=c,$("body").on("click","a",e),window.onpopstate=i}();